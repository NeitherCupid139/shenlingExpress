"use strict";const e=require("../../common/vendor.js"),t=require("../../apis/task.js");if(!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-file-picker")+e.resolveComponent("uni-list")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const i={__name:"index",setup(i){const o=e.ref(0),n=[],l=e.ref(""),u=e.ref(""),a=e.ref([]),s=e.ref("");e.onLoad((e=>{o.value=e.transportTaskId}));const c=e.ref(null),p=e.computed((()=>s.value||"请选择")),r=e.ref("");async function d(){let t=await e.index.chooseLocation({});r.value=t.address,console.log(t)}function m(){c.value.close()}function v(){c.value.open()}const k=e.reactive([{text:"发动机启动困难",checked:!0},{text:"不着车，漏油",checked:!1},{text:"照明失灵",checked:!1},{text:"排烟异常、温度异常",checked:!1},{text:"其他问题",checked:!1}]);async function x(){let i={transportTaskId:o.value,exceptionTime:s.value,exceptionPlace:r.value,exceptionType:l.value,exceptionDescribe:u.value,exceptionImagesList:a.value};await t.taskApi.except(i),e.index.switchTab({url:"/pages/task/index"})}return(t,i)=>({a:e.t(p.value),b:e.o((e=>s.value=e)),c:e.p({modelValue:s.value}),d:e.p({"show-arrow":!0,title:"异常时间"}),e:e.o(d),f:e.p({"show-arrow":!0,clickable:!0,ellipsis:"1",title:"上报位置",rightText:r.value}),g:e.o(v),h:e.p({"show-arrow":!0,clickable:!0,title:"异常类型",rightText:l.value}),i:u.value,j:e.o((e=>u.value=e.detail.value)),k:e.t(u.value.length),l:e.p({direction:"column",title:"异常描述"}),m:e.o((e=>a.value=e)),n:e.p({limit:"6",modelValue:a.value}),o:e.p({border:!1,direction:"column",title:"上传图片（最多6张）"}),p:e.p({border:!1}),q:e.o(x),r:e.f(k,((t,i,o)=>({a:e.o((e=>function(e){n.includes(e.text)||n.push(e.text),l.value=n.join(",")}(t))),b:"149702a6-11-"+o+",149702a6-9",c:e.p({title:t.text})}))),s:e.o(m),t:e.sr(c,"149702a6-8",{k:"popup"}),v:e.p({"mask-click":!1,type:"bottom"})})}},o=e._export_sfc(i,[["__scopeId","data-v-149702a6"]]);wx.createPage(o);
