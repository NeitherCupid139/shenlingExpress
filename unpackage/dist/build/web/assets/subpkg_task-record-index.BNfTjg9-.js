import{B as e,r as t,a,c as l,w as s,d as i,F as d,e as o,p as r,f as u,t as c,h as n,q as p,b as f,n as _,x as m,v,N as x,i as y,O as k,P as h,C as D,s as b,S as g,k as F}from"./index-BIIXmq18.js";import{_ as w,a as I}from"./uni-list.-t36oq1I.js";import{r as T,o as V}from"./uni-app.es.DHhZJsCJ.js";import{_ as j}from"./uni-datetime-picker.J5GOE4-t.js";import{t as C}from"./task.CsHE52dC.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as L}from"./uni-file-picker.Uh-kkYvP.js";import"./uni-fetch.BLhei1mW.js";const A=e("task",(()=>({recordData:t({id:"",startTime:"",endTime:"",isBreakRules:!1,breakRulesType:null,penaltyAmount:null,deductPoints:null,isFault:!1,faultType:null,faultDescription:"",faultImagesList:[],isAccident:!1,accidentType:null,accidentDescription:"",accidentImagesList:[]})}))),U=E({__name:"vehicle-options",props:{types:Array,datakey:String},setup(e){const p=A(),f=t(-1),_=e;return(e,t)=>{const m=n;return a(),l(m,{class:"vehicle-options"},{default:s((()=>[(a(!0),i(d,null,o(_.types,((e,t)=>(a(),l(m,{class:r(["option",{active:f.value===t}]),key:e.id,onClick:a=>function(e,t){f.value=e,console.log(_.datakey,t),p.recordData[_.datakey]=t.id}(t,e)},{default:s((()=>[u(c(e.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})}}},[["__scopeId","data-v-137ad703"]]),R=E({__name:"vehicle-violation",setup(e){const r=A(),c=t(!1),D=t([{title:"违章类型",key:"breakRulesType",types:[{id:1,text:"闯红灯"},{id:2,text:"无证驾驶"},{id:3,text:"超载"},{id:4,text:"酒后驾驶"},{id:5,text:"超速驾驶"},{id:6,text:"其它"}]},{title:"罚款金额",key:"penaltyAmount",types:[{id:"0",text:"0元"},{id:"100",text:"100元"},{id:"200",text:"200元"},{id:"300",text:"300元"},{id:"500",text:"500元"},{id:"1000",text:"1000元"},{id:"2000",text:"2000元"}]},{title:"扣分",key:"deductPoints",types:["0分","1分","2分","3分","6分","12分"],types:[{id:"0",text:"0分"},{id:"1",text:"1分"},{id:"2",text:"2分"},{id:"3",text:"3分"},{id:"6",text:"6分"},{id:"12",text:"12分"}]}]);function b(e){c.value=!!parseInt(e.detail.value),r.recordData.isBreakRules=c.value}return(e,t)=>{const r=n,g=x,F=y,V=k,j=h,C=T(p("uni-list-item"),w),E=T(p("uni-list"),I);return a(),l(r,{class:"vehicle-panel"},{default:s((()=>[f(r,{class:"vehicle-panel-header"},{default:s((()=>[f(r,{class:"label"},{default:s((()=>[u("交通违章")])),_:1}),f(j,{class:"radio-group",onChange:b},{default:s((()=>[f(V,{class:"label"},{default:s((()=>[f(g,{class:"radio",value:"1",color:"#EF4F3F"}),f(F,null,{default:s((()=>[u("是")])),_:1})])),_:1}),f(V,{class:"label"},{default:s((()=>[f(g,{class:"radio",checked:"",value:"0",color:"#EF4F3F"}),f(F,null,{default:s((()=>[u("否")])),_:1})])),_:1})])),_:1})])),_:1}),_(f(r,{class:"vehicle-panel-body"},{default:s((()=>[f(E,null,{default:s((()=>[(a(!0),i(d,null,o(D.value,(e=>(a(),l(C,{direction:"column",border:!1,title:e.title},{footer:s((()=>[f(m(U),{datakey:e.key,types:e.types},null,8,["datakey","types"])])),_:2},1032,["title"])))),256))])),_:1})])),_:1},512),[[v,c.value]])])),_:1})}}},[["__scopeId","data-v-1a3d14ae"]]),B=E({__name:"vehicle-breakdown",setup(e){const i=A(),d=t(!1),o=t([{id:1,text:"启动困难"},{id:2,text:"不着车"},{id:3,text:"漏油"},{id:4,text:"漏水"},{id:5,text:"照明失灵"},{id:6,text:"有异响"},{id:7,text:"排烟异常"},{id:8,text:"温度异常"},{id:9,text:"其他"}]);function r(e){d.value=parseInt(e.detail.value),i.recordData.isFault=1==d.value}return(e,t)=>{const c=n,b=x,g=y,F=k,V=h,j=D,C=T(p("uni-list-item"),w),E=T(p("uni-file-picker"),L),A=T(p("uni-list"),I);return a(),l(c,{class:"vehicle-panel"},{default:s((()=>[f(c,{class:"vehicle-panel-header"},{default:s((()=>[f(c,{class:"label"},{default:s((()=>[u("车辆故障")])),_:1}),f(V,{class:"radio-group",onChange:r},{default:s((()=>[f(F,{class:"label"},{default:s((()=>[f(b,{class:"radio",value:"1",color:"#EF4F3F"}),f(g,null,{default:s((()=>[u("是")])),_:1})])),_:1}),f(F,{class:"label"},{default:s((()=>[f(b,{class:"radio",checked:"",value:"0",color:"#EF4F3F"}),f(g,null,{default:s((()=>[u("否")])),_:1})])),_:1})])),_:1})])),_:1}),_(f(c,{class:"vehicle-panel-body"},{default:s((()=>[f(A,null,{default:s((()=>[f(C,{direction:"column",border:!1,title:"故障类型"},{footer:s((()=>[f(m(U),{datakey:"faultType",types:o.value},null,8,["types"]),f(c,{class:"textarea-wrapper"},{default:s((()=>[f(j,{modelValue:m(i).recordData.faultDescription,"onUpdate:modelValue":t[0]||(t[0]=e=>m(i).recordData.faultDescription=e),class:"textarea",placeholder:"请输入故障描述"},null,8,["modelValue"]),f(c,{class:"words-count"},{default:s((()=>[u("0/50")])),_:1})])),_:1})])),_:1}),f(C,{direction:"column",border:!1,title:"请上传现场照片"},{footer:s((()=>[f(E,{limit:"6",modelValue:m(i).recordData.faultImagesList,"onUpdate:modelValue":t[1]||(t[1]=e=>m(i).recordData.faultImagesList=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[v,d.value]])])),_:1})}}},[["__scopeId","data-v-0a6c5c7a"]]),P=E({__name:"vehicle-accident",setup(e){const i=A(),d=t(!1),o=t([{id:1,text:"直行事故"},{id:2,text:"追尾事故"},{id:3,text:"超车事故"},{id:4,text:"左转弯事故"},{id:5,text:"右转弯事故"},{id:6,text:"弯道事故"},{id:7,text:"坡道事故"},{id:8,text:"会车事故"},{id:9,text:"其他"}]);function r(e){d.value=parseInt(e.detail.value),i.recordData.isAccident=1==d.value}return(e,t)=>{const c=n,b=x,g=y,F=k,V=h,j=D,C=T(p("uni-list-item"),w),E=T(p("uni-file-picker"),L),A=T(p("uni-list"),I);return a(),l(c,{class:"vehicle-panel"},{default:s((()=>[f(c,{class:"vehicle-panel-header"},{default:s((()=>[f(c,{class:"label"},{default:s((()=>[u("交通事故")])),_:1}),f(V,{class:"radio-group",onChange:r},{default:s((()=>[f(F,{class:"label"},{default:s((()=>[f(b,{class:"radio",value:"1",color:"#EF4F3F"}),f(g,null,{default:s((()=>[u("是")])),_:1})])),_:1}),f(F,{class:"label"},{default:s((()=>[f(b,{class:"radio",checked:"",value:"0",color:"#EF4F3F"}),f(g,null,{default:s((()=>[u("否")])),_:1})])),_:1})])),_:1})])),_:1}),_(f(c,{class:"vehicle-panel-body"},{default:s((()=>[f(A,null,{default:s((()=>[f(C,{direction:"column",border:!1,title:"事故类型"},{footer:s((()=>[f(m(U),{datakey:"accidentType",types:o.value},null,8,["types"]),f(c,{class:"textarea-wrapper"},{default:s((()=>[f(j,{modelValue:m(i).recordData.accidentDescription,"onUpdate:modelValue":t[0]||(t[0]=e=>m(i).recordData.accidentDescription=e),class:"textarea",placeholder:"请输入事故描述"},null,8,["modelValue"]),f(c,{class:"words-count"},{default:s((()=>[u("0/50")])),_:1})])),_:1})])),_:1}),f(C,{direction:"column",border:!1,title:"请上传现场照片"},{footer:s((()=>[f(E,{modelValue:m(i).recordData.accidentImagesList,"onUpdate:modelValue":t[1]||(t[1]=e=>m(i).recordData.accidentImagesList=e),limit:"6"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[v,d.value]])])),_:1})}}},[["__scopeId","data-v-e102f801"]]),q=E({__name:"index",setup(e){const i=A();async function d(){let e=i.recordData,t=await C.record(e);if(console.log("回车登记:",t),200!==t.data.code)return uni.utils.toast(t.data.msg);b({url:"/pages/task/index"})}return t(""),V((e=>{i.recordData.id=e.transportTaskId,i.recordData.startTime=e.actualDepartureTime})),(e,t)=>{const o=T(p("uni-list-item"),w),r=n,_=T(p("uni-datetime-picker"),j),v=T(p("uni-list"),I),x=g,y=F;return a(),l(r,{class:"page-container"},{default:s((()=>[f(x,{class:"scroll-view","scroll-y":""},{default:s((()=>[f(r,{class:"scroll-view-wrapper"},{default:s((()=>[f(v,{class:"base-info"},{default:s((()=>[f(o,{style:{overflow:"visible"},title:"出车时间","show-arrow":"","right-text":m(i).recordData.startTime},null,8,["right-text"]),f(o,{"show-arrow":"",title:"回车时间"},{footer:s((()=>[f(_,{modelValue:m(i).recordData.endTime,"onUpdate:modelValue":t[0]||(t[0]=e=>m(i).recordData.endTime=e)},{default:s((()=>[f(r,{class:"picker-value"},{default:s((()=>[u(c(m(i).recordData.endTime||"请选择"),1)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(m(R)),f(m(B)),f(m(P))])),_:1})])),_:1}),f(r,{class:"toolbar"},{default:s((()=>[f(y,{class:"button",onClick:d},{default:s((()=>[u("提交登记")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-693ab1d6"]]);export{q as default};
