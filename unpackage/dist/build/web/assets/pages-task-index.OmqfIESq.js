import{r as e,o as a,a as s,c as l,w as t,b as d,d as r,F as u,e as c,f as n,t as i,g as o,i as f,h as _,j as k,k as p,S as v,l as m,m as b,n as y,v as h,p as g}from"./index-DI0kHqxQ.js";import{t as w}from"./task.iY-xLkmz.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-fetch.eH-J7x8f.js";const T=x({__name:"pickup",setup(m){const b=e([]);a((async()=>{let e=await w.list();b.value=e.data.data.items}));const y=e(1);e(!1);const h=e(!0),g=e(!1);function x(){h.value&&(y.value++,T(y.value,5))}async function T(e,a=5){const{code:s,data:l}=await w.list(1,e,a);console.log(l.code),200!==l.code&&uni.utils.toast("获取任务列表失败","error"),console.log(l.data.items),b.value=b.value.concat(l.data.items)}async function I(){await T()}return(e,a)=>{const m=f,y=_,h=k,w=p,T=v;return s(),l(T,{onScrolltolower:x,onRefresherrefresh:I,"refresher-triggered":g.value,"scroll-y":"","refresher-enabled":"",class:"scroll-view"},{default:t((()=>[d(y,{class:"scroll-view-wrapper"},{default:t((()=>[(s(!0),r(u,null,c(b.value,(e=>(s(),l(y,{class:"task-card",key:e.id},{default:t((()=>[d(h,{"hover-class":"none",url:"/subpkg_task/detail/index?id="+e.id},{default:t((()=>[d(y,{class:"header"},{default:t((()=>[d(m,{class:"no"},{default:t((()=>[n("任务编号: "+i(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(y,{class:"body"},{default:t((()=>[d(y,{class:"timeline"},{default:t((()=>[d(y,{class:"line"},{default:t((()=>[n(i(e.startAddress),1)])),_:2},1024),d(y,{class:"line"},{default:t((()=>[n(i(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(y,{class:"footer"},{default:t((()=>[d(y,{class:"label"},{default:t((()=>[n("提货时间")])),_:1}),d(y,{class:"time"},{default:t((()=>[n(i(e.planDepartureTime),1)])),_:2},1024),e.enablePickUp?(s(),l(h,{key:0,"hover-class":"none",url:"/subpkg_task/pickup/index?id="+e.id,class:"action"},{default:t((()=>[n("提货")])),_:2},1032,["url"])):o("",!0),e.enablePickUp?o("",!0):(s(),l(w,{key:1,"hover-class":"none",class:"action",disabled:!e.enablePickUp},{default:t((()=>[n(" 提货 ")])),_:2},1032,["disabled"]))])),_:2},1024)])),_:2},1024)))),128)),o("",!0)])),_:1})])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-6c4b36ea"]]),I=x({__name:"delivery",setup(p){const m=e([]);return a((async()=>{let e=await w.list(2);m.value=e.data.data.items})),(e,a)=>{const p=f,b=_,y=k,h=v;return s(),l(h,{"scroll-y":"","refresher-enabled":"",class:"scroll-view"},{default:t((()=>[d(b,{class:"scroll-view-wrapper"},{default:t((()=>[(s(!0),r(u,null,c(m.value,(e=>(s(),l(b,{class:"task-card",key:e.id},{default:t((()=>[d(y,{"hover-class":"none",url:"/subpkg_task/detail/index?id="+e.id},{default:t((()=>[d(b,{class:"header"},{default:t((()=>[d(p,{class:"no"},{default:t((()=>[n("任务编号: "+i(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(b,{class:"body"},{default:t((()=>[d(b,{class:"timeline"},{default:t((()=>[d(b,{class:"line"},{default:t((()=>[n(i(e.startAddress),1)])),_:2},1024),d(b,{class:"line"},{default:t((()=>[n(i(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(b,{class:"footer"},{default:t((()=>[d(b,{class:"label"},{default:t((()=>[n("提货时间")])),_:1}),d(b,{class:"time"},{default:t((()=>[n(i(e.planDepartureTime),1)])),_:2},1024),2===e.status?(s(),l(y,{key:0,"hover-class":"none",url:"/subpkg_task/delivery/index?id="+e.id,class:"action"},{default:t((()=>[n(" 交付 ")])),_:2},1032,["url"])):o("",!0),4===e.status?(s(),l(y,{key:1,"hover-class":"none",url:`/subpkg_task/record/index?transportTaskId=${e.transportTaskId}&actualDepartureTime=${e.actualDepartureTime}`,class:"action"},{default:t((()=>[n("回车登记")])),_:2},1032,["url"])):o("",!0)])),_:2},1024)])),_:2},1024)))),128)),o("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-01bd93ea"]]),A=x({__name:"complete",setup(b){const y=e([]),h=e(""),g=e("");async function x(){if(!h.value||!g.value)return uni.utils.toast("开始和结束时间非空","error");let e=await w.list(6,1,50,h.value,g.value);y.value=e.data.data.items}function T(e){h.value=e.detail.value}function I(e){g.value=e.detail.value}return a((async()=>{let e=await w.list(6);y.value=e.data.data.items})),(e,a)=>{const b=m,w=f,A=p,j=_,C=k,D=v;return s(),r(u,null,[d(j,{class:"task-search"},{default:t((()=>[d(j,{class:"filter-bar"},{default:t((()=>[d(b,{class:"picker",mode:"date",onChange:T},{default:t((()=>[n(i(h.value),1)])),_:1}),d(w,{class:"text"},{default:t((()=>[n("至")])),_:1}),d(b,{class:"picker",mode:"date",onChange:I},{default:t((()=>[n(i(g.value),1)])),_:1}),d(A,{class:"button",onClick:x},{default:t((()=>[n("筛选")])),_:1})])),_:1})])),_:1}),d(D,{"scroll-y":"","refresher-enabled":"",class:"scroll-view"},{default:t((()=>[d(j,{class:"scroll-view-wrapper"},{default:t((()=>[y.value.length>0?(s(!0),r(u,{key:0},c(y.value,(e=>(s(),l(j,{key:e.id,class:"task-card"},{default:t((()=>[d(C,{"hover-class":"none",url:"/subpkg_task/detail/index?id="+e.id},{default:t((()=>[d(j,{class:"header"},{default:t((()=>[d(w,{class:"no"},{default:t((()=>[n("任务编号: "+i(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(j,{class:"body"},{default:t((()=>[d(j,{class:"timeline"},{default:t((()=>[d(j,{class:"line"},{default:t((()=>[n(i(e.startAddress),1)])),_:2},1024),d(j,{class:"line"},{default:t((()=>[n(i(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(j,{class:"footer flex"},{default:t((()=>[d(j,{class:"label"},{default:t((()=>[n("提货时间")])),_:1}),d(j,{class:"time"},{default:t((()=>[n(i(e.actualDepartureTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):o("",!0),0==y.value.length?(s(),l(j,{key:1,class:"task-blank"},{default:t((()=>[n("无完成货物")])),_:1})):o("",!0)])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-7d77e88c"]]),j=x({__name:"index",setup(a){const k=e(0),p=b([{title:"待提货",rendered:!0},{title:"在途",rendered:!1},{title:"已完成",rendered:!1}]);return(e,a)=>{const v=f,m=_;return s(),l(m,{class:"page-container"},{default:t((()=>[d(m,{class:"task-tabbar"},{default:t((()=>[(s(!0),r(u,null,c(p,((e,a)=>(s(),l(v,{key:e.title,onClick:e=>(e=>{p[e].rendered=!0,k.value=e})(a),class:g([{active:k.value===a},"tab"])},{default:t((()=>[n(i(e.title),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),p[0].rendered?y((s(),l(m,{key:0,class:"task-list"},{default:t((()=>[d(T)])),_:1},512)),[[h,0===k.value]]):o("",!0),p[1].rendered?y((s(),l(m,{key:1,class:"task-list"},{default:t((()=>[d(I)])),_:1},512)),[[h,1===k.value]]):o("",!0),p[2].rendered?y((s(),l(m,{key:2,class:"task-list"},{default:t((()=>[d(A)])),_:1},512)),[[h,2===k.value]]):o("",!0)])),_:1})}}},[["__scopeId","data-v-1fb5d57f"]]);export{j as default};
